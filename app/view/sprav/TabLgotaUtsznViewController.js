/*
 * File: app/view/sprav/TabLgotaUtsznViewController.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Osbb.view.sprav.TabLgotaUtsznViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.tablgotautszn',

    onComboboxSelect2: function(combo, record, eOpts) {
        var stUser = Ext.data.StoreManager.get("StUser");
        var values =stUser.getAt(0);
        var login = values.get('login');
        var password = values.get('password');

        var StUtszn = Ext.data.StoreManager.get("stLgotaUtszn");
        var btnGetLgotaUtszn =  Ext.getCmp('btnGetLgotaUtszn');
        var btnPrintLgotaUtszn =  Ext.getCmp('btnPrintLgotaUtszn');
        var btnPrintLgotaReestrUtszn =  Ext.getCmp('btnPrintLgotaReestrUtszn');
        var btnPrintLgotaForma3 =  Ext.getCmp('btnPrintLgotaForma3');
        var btnInsDoplataLgotaUtszn =  Ext.getCmp('btnInsDoplataLgotaUtszn');
        var btnInsPoplataLgotaUtszn =  Ext.getCmp('btnInsPoplataLgotaUtszn');
        var btnInsOplataLgotaUtszn =  Ext.getCmp('btnInsOplataLgotaUtszn');
        var btnInsLgotaOplata =  Ext.getCmp('btnInsLgotaOplata');
        var btnOtkatLgotaOplata =  Ext.getCmp('btnOtkatLgotaOplata');
        var btnControlLgotaUtszn =  Ext.getCmp('btnControlLgotaUtszn');

        var form =  Ext.getCmp('fmLgotaUtszn');
        var data = form.getForm().findField('data_nach').getValue();
        var osmd_id = form.getForm().findField('osmd_id').getValue();
        var oplata = form.getForm().findField('oplata').getValue();


        //LOGIN & PASSWORD



        //LOGIKA
        if (record) {
            values.set({'usluga_id':record.get('usluga_id')});
            stUser.sync();
            btnGetLgotaUtszn.setDisabled(false);
            btnPrintLgotaUtszn.setDisabled(false);
            btnPrintLgotaForma3.setDisabled(false);
            btnPrintLgotaReestrUtszn.setDisabled(false);
            btnInsOplataLgotaUtszn.setDisabled(false);
            btnInsPoplataLgotaUtszn.setDisabled(false);
            btnInsDoplataLgotaUtszn.setDisabled(false);
            btnInsLgotaOplata.setDisabled(false);
            btnOtkatLgotaOplata.setDisabled(false);
            btnControlLgotaUtszn.setDisabled(false);

            StUtszn.load({
                params: {
                    what:'getLgotaUtszn',
                    login:login,
                    password:password,
                    data:data,
                    osmd_id: osmd_id,
                    usluga_id: record.get('usluga_id')
                },
                scope:this
            });
        }
    }

});
